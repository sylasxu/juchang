<!--
  举报弹窗组件
  Requirements: 7.3, 7.4
-->
<t-popup
  visible="{{visible}}"
  placement="bottom"
  bind:visible-change="onClose"
>
  <view class="report-sheet" catchtouchmove="noop">
    <!-- 标题栏 -->
    <view class="flex items-center justify-between px-4 py-3 border-b border-gray-100">
      <text class="text-lg font-bold text-gray-900">{{type === 'activity' ? '举报活动' : type === 'message' ? '举报消息' : '举报用户'}}</text>
      <view class="close-btn" bindtap="onClose">
        <text class="text-gray-400">✕</text>
      </view>
    </view>

    <!-- 举报原因选择 -->
    <view class="px-4 py-4">
      <text class="text-sm text-gray-600 mb-3 block">请选择举报原因</text>
      <t-radio-group
        value="{{selectedReason}}"
        bind:change="onReasonChange"
      >
        <view class="flex flex-col gap-2">
          <t-radio
            wx:for="{{reasonOptions}}"
            wx:key="value"
            value="{{item.value}}"
            label="{{item.label}}"
            borderless
          />
        </view>
      </t-radio-group>
    </view>

    <!-- 举报说明 -->
    <view class="px-4 pb-4">
      <text class="text-sm text-gray-600 mb-2 block">补充说明（可选）</text>
      <t-textarea
        value="{{description}}"
        placeholder="请描述具体问题..."
        maxlength="{{500}}"
        autosize
        bind:change="onDescriptionInput"
      />
    </view>

    <!-- 提交按钮 -->
    <view class="px-4 pb-4 safe-bottom">
      <t-button
        theme="primary"
        block
        loading="{{submitting}}"
        disabled="{{!selectedReason || submitting}}"
        bindtap="onSubmit"
      >
        提交举报
      </t-button>
    </view>
  </view>
</t-popup>
