<!--
  AI Dock 组件 (Floating Capsule)
  Requirements: 5.1, 5.2, 5.3, 5.4, 5.5, 5.6, 5.7, 5.8, 15.1, 15.17
  
  Chat-First 架构的超级输入坞
  - 悬浮胶囊样式
  - Halo Card 渐变边框效果
  - 输入框 + 快捷按钮
-->
<view 
  class="ai-dock {{isFocused ? 'focused' : ''}} {{disabled ? 'disabled' : ''}}"
  style="bottom: calc({{bottomOffset}}rpx + env(safe-area-inset-bottom));"
>
  <!-- 快捷按钮区域 -->
  <view class="dock-actions" wx:if="{{!isFocused && !inputValue}}">
    <!-- 粘贴按钮 -->
    <view 
      class="action-btn btn-pressable" 
      bindtap="onPasteTap"
      hover-class="action-btn--hover"
    >
      <t-icon name="file-paste" size="36rpx" />
      <text class="action-text">粘贴</text>
    </view>
    
    <!-- 语音按钮 -->
    <view 
      class="action-btn btn-pressable {{isRecording ? 'recording' : ''}}" 
      bindtap="onVoiceTap"
      hover-class="action-btn--hover"
    >
      <view wx:if="{{isRecording}}" class="recording-indicator">
        <view class="recording-dot"></view>
        <text class="recording-time">{{recordingDuration}}s</text>
      </view>
      <block wx:else>
        <t-icon name="sound" size="36rpx" />
        <text class="action-text">语音</text>
      </block>
    </view>
  </view>
  
  <!-- 输入区域 -->
  <view class="dock-input-wrapper">
    <input
      class="dock-input"
      type="text"
      placeholder="{{placeholder}}"
      placeholder-class="dock-placeholder"
      value="{{inputValue}}"
      disabled="{{disabled}}"
      confirm-type="send"
      adjust-position="{{false}}"
      bindinput="onInputChange"
      bindfocus="onInputFocus"
      bindblur="onInputBlur"
      bindconfirm="onInputConfirm"
    />
    
    <!-- 清空按钮 -->
    <view 
      wx:if="{{inputValue}}" 
      class="clear-btn btn-pressable" 
      catchtap="onClearTap"
    >
      <t-icon name="close-circle-filled" size="36rpx" color="var(--text-tertiary)" />
    </view>
  </view>
  
  <!-- 发送按钮 -->
  <view 
    wx:if="{{inputValue}}"
    class="send-btn btn-pressable" 
    bindtap="onSendTap"
    hover-class="send-btn--hover"
  >
    <t-icon name="send" size="40rpx" color="#FFFFFF" />
  </view>
</view>
