<!--
  Activity Preview Sheet ç»„ä»¶ - åœ°å›¾æµ®å±‚é¢„è§ˆ
  Requirements: 18.4, è½»é‡é¢„è§ˆ
  
  è§†è§‰ç»“æ„ï¼š
  - æ‹–æ‹½æŒ‡ç¤ºæ¡ (40rpx å®½ç°è‰²æ¨ªæ¡)
  - æ´»åŠ¨æ ‡é¢˜ + ç±»å‹å›¾æ ‡
  - æ—¶é—´ + åœ°ç‚¹ + "è¿˜å·® N äºº"
  - ä¸¤ä¸ªæŒ‰é’®ï¼š[æŸ¥çœ‹è¯¦æƒ…] (æ¬¡è¦) + [ç›´æ¥æŠ¥å] (ä¸»è¦)
  
  äº¤äº’é€»è¾‘ï¼š
  - åœ°å›¾é¡µç‚¹å‡» Pin â†’ æ˜¾ç¤ºæ­¤æµ®å±‚
  - ç‚¹å‡»åœ°å›¾ç©ºç™½å¤„ â†’ æµ®å±‚ä¸‹æ²‰éšè—
  - ç‚¹å‡» [æŸ¥çœ‹è¯¦æƒ…] â†’ navigateTo æ´»åŠ¨è¯¦æƒ…é¡µ
  - ç‚¹å‡» [ç›´æ¥æŠ¥å] â†’ æ£€æŸ¥æ‰‹æœºå· â†’ æŠ¥å
-->
<view class="preview-sheet {{visible ? 'preview-sheet--visible' : ''}}">
  <!-- æ‹–æ‹½æŒ‡ç¤ºæ¡ -->
  <view class="preview-sheet__handle">
    <view class="preview-sheet__handle-bar"></view>
  </view>
  
  <!-- å†…å®¹åŒº -->
  <view class="preview-sheet__content" wx:if="{{activityData}}">
    <!-- Header: æ ‡é¢˜ + ç±»å‹å›¾æ ‡ -->
    <view class="preview-sheet__header">
      <view class="preview-sheet__type-icon preview-sheet__type-icon--{{colorClass}}">
        <text class="preview-sheet__type-icon-text">{{typeIcon}}</text>
      </view>
      <view class="preview-sheet__title-wrap">
        <text class="preview-sheet__title">{{activityData.title}}</text>
        <text class="preview-sheet__type-label">{{typeLabel}}</text>
      </view>
    </view>
    
    <!-- Info: æ—¶é—´ + åœ°ç‚¹ + äººæ•° -->
    <view class="preview-sheet__info">
      <view class="preview-sheet__info-row">
        <text class="preview-sheet__info-icon">ğŸ•</text>
        <text class="preview-sheet__info-text">{{formattedTime}}</text>
      </view>
      <view class="preview-sheet__info-row">
        <text class="preview-sheet__info-icon">ğŸ“</text>
        <text class="preview-sheet__info-text">{{activityData.locationName}}</text>
      </view>
      <view class="preview-sheet__info-row" wx:if="{{spotsLeft > 0}}">
        <text class="preview-sheet__info-icon">ğŸ‘¥</text>
        <text class="preview-sheet__info-text preview-sheet__info-text--highlight">è¿˜å·® {{spotsLeft}} äºº</text>
      </view>
      <view class="preview-sheet__info-row" wx:elif="{{spotsLeft === 0}}">
        <text class="preview-sheet__info-icon">ğŸ‘¥</text>
        <text class="preview-sheet__info-text preview-sheet__info-text--full">å·²æ»¡å‘˜</text>
      </view>
    </view>
    
    <!-- Actions: ä¸¤ä¸ªæŒ‰é’® -->
    <view class="preview-sheet__actions">
      <button class="preview-sheet__btn preview-sheet__btn--secondary" bindtap="onViewDetail">
        <text>æŸ¥çœ‹è¯¦æƒ…</text>
      </button>
      <button 
        class="preview-sheet__btn preview-sheet__btn--primary {{isFull || isJoined ? 'preview-sheet__btn--disabled' : ''}}"
        bindtap="onJoin"
        disabled="{{isFull || isJoined}}"
      >
        <text>{{isJoined ? 'å·²æŠ¥å' : (isFull ? 'å·²æ»¡å‘˜' : 'ç›´æ¥æŠ¥å')}}</text>
      </button>
    </view>
  </view>
  
  <!-- ç©ºçŠ¶æ€ -->
  <view class="preview-sheet__empty" wx:else>
    <text class="preview-sheet__empty-text">ç‚¹å‡»åœ°å›¾ä¸Šçš„æ ‡è®°æŸ¥çœ‹æ´»åŠ¨</text>
  </view>
</view>
