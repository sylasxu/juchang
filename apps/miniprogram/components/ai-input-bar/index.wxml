<!--
  AI è¾“å…¥æ ç»„ä»¶
  Requirements: 2.1, 2.2, 2.5
  
  ä½ç½®ï¼šTabbarä¸Šæ–¹æ‚¬æµ®
  å¤–è§‚ï¼šç±»ä¼¼çµåŠ¨å²›çš„é»‘è‰²é•¿æ¡
  å·¦ä¾§ï¼šAIå›¾æ ‡
  ä¸­é—´ï¼šæç¤ºæ–‡æ¡ˆ/è¾“å…¥æ¡†
  å³ä¾§ï¼šè¯­éŸ³æŒ‰é’®
-->
<view class="ai-input-bar {{isExpanded ? 'expanded' : ''}}">
  <!-- æ”¶èµ·çŠ¶æ€ï¼šç‚¹å‡»å±•å¼€ -->
  <view wx:if="{{!isExpanded}}" class="bar-collapsed" bindtap="onBarTap">
    <view class="ai-icon">
      <text class="icon-emoji">ðŸ¤–</text>
    </view>
    <view class="placeholder-text">{{placeholder}}</view>
    <view class="voice-btn" catchtap="onVoiceTap">
      <t-icon name="sound" size="40rpx" color="#fff" />
    </view>
  </view>

  <!-- å±•å¼€çŠ¶æ€ï¼šè¾“å…¥æ¡† -->
  <view wx:else class="bar-expanded">
    <view class="ai-icon">
      <text class="icon-emoji">ðŸ¤–</text>
    </view>
    
    <view class="input-wrapper">
      <input
        class="input-field"
        type="text"
        placeholder="{{placeholder}}"
        placeholder-class="input-placeholder"
        value="{{inputValue}}"
        focus="{{isExpanded}}"
        confirm-type="send"
        bindinput="onInputChange"
        bindfocus="onInputFocus"
        bindblur="onInputBlur"
        bindconfirm="onInputConfirm"
      />
      
      <!-- æ¸…ç©ºæŒ‰é’® -->
      <view wx:if="{{inputValue}}" class="clear-btn" catchtap="onClearTap">
        <t-icon name="close-circle-filled" size="36rpx" color="#999" />
      </view>
    </view>

    <!-- è¯­éŸ³/å‘é€æŒ‰é’® -->
    <view class="action-btn" catchtap="{{inputValue ? 'onInputConfirm' : 'onVoiceTap'}}">
      <view wx:if="{{isRecording}}" class="recording-indicator">
        <view class="recording-dot"></view>
        <text class="recording-time">{{recordingDuration}}s</text>
      </view>
      <t-icon wx:elif="{{inputValue}}" name="send" size="44rpx" color="#fff" />
      <t-icon wx:else name="sound" size="44rpx" color="#fff" />
    </view>
  </view>
</view>
