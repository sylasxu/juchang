<!--
  Widget Draft ç»„ä»¶ (v3.5 é›¶æˆæœ¬åœ°å›¾æ–¹æ¡ˆ)
  Requirements: 6.1, 6.2, 6.3, 6.4, 6.5, 6.6, 6.7, 6.8, 6.9
  v3.4 æ–°å¢: å¤šè½®å¯¹è¯æ”¯æŒ - å¿«æ·æ“ä½œæŒ‰é’®
  
  æ„å›¾è§£æå¡ç‰‡
  - æ˜¾ç¤º AI é¢„å¡«çš„æ ‡é¢˜ã€æ—¶é—´ã€åœ°ç‚¹ã€ç±»å‹
  - ä½¿ç”¨ä½ç½®æ–‡å­—å¡ç‰‡æ›¿ä»£é™æ€åœ°å›¾ï¼ˆé›¶æˆæœ¬ï¼‰
  - å®ç° [ğŸ“ è°ƒæ•´ä½ç½®] å’Œ [âœ… ç¡®è®¤å‘å¸ƒ] æŒ‰é’®
  - v3.4: å¿«æ·æ“ä½œæŒ‰é’®ï¼ˆæ¢åœ°æ–¹ã€æ¢æ—¶é—´ã€åŠ äººï¼‰
-->
<view class="widget-draft halo-card {{isExpired ? 'widget-draft--expired' : ''}}">
  <!-- è¿‡æœŸæ ‡ç­¾ -->
  <view wx:if="{{isExpired}}" class="expired-badge">
    <t-icon name="error-circle" size="24rpx" />
    <text>å·²è¿‡æœŸ</text>
  </view>
  
  <!-- å¤´éƒ¨ï¼šç±»å‹å›¾æ ‡ + æ ‡é¢˜ -->
  <view class="draft-header">
    <view class="type-icon icon-circle icon-circle--{{colorClass}}">
      <t-icon name="{{typeIcon}}" size="40rpx" />
    </view>
    <view class="header-content">
      <text class="draft-title ellipsis-2">{{draft.title}}</text>
      <view class="type-badge">
        <text class="type-text">{{typeLabel}}</text>
      </view>
    </view>
  </view>
  
  <!-- ä½ç½®å¡ç‰‡ï¼ˆæ›¿ä»£é™æ€åœ°å›¾ï¼Œé›¶æˆæœ¬æ–¹æ¡ˆï¼‰ -->
  <view class="location-card" bindtap="onLocationTap">
    <view class="location-card__icon">
      <t-icon name="location" size="48rpx" color="#5B75FB" />
    </view>
    <view class="location-card__content">
      <text class="location-card__name ellipsis">{{draft.locationName || 'ç‚¹å‡»æŸ¥çœ‹åœ°å›¾'}}</text>
      <text wx:if="{{draft.locationHint}}" class="location-card__hint ellipsis">{{draft.locationHint}}</text>
      <text wx:elif="{{draft.address}}" class="location-card__hint ellipsis">{{draft.address}}</text>
    </view>
    <view class="location-card__arrow">
      <t-icon name="chevron-right" size="32rpx" color="#9CA3AF" />
    </view>
  </view>
  
  <!-- æ´»åŠ¨ä¿¡æ¯ -->
  <view class="draft-info">
    <!-- æ—¶é—´ -->
    <view class="info-item">
      <view class="info-icon">
        <t-icon name="time" size="32rpx" />
      </view>
      <view class="info-content">
        <text class="info-label">æ—¶é—´</text>
        <text class="info-value">{{formattedTime}}</text>
      </view>
    </view>
    
    <!-- äººæ•° -->
    <view class="info-item">
      <view class="info-icon">
        <t-icon name="user" size="32rpx" />
      </view>
      <view class="info-content">
        <text class="info-label">äººæ•°</text>
        <text class="info-value">æœ€å¤š {{draft.maxParticipants}} äºº</text>
      </view>
    </view>
  </view>
  
  <!-- v3.4 æ–°å¢ï¼šå¿«æ·æ“ä½œæŒ‰é’®ï¼ˆå¤šè½®å¯¹è¯ï¼‰ -->
  <view class="quick-actions">
    <view class="quick-action-btn btn-pressable" bindtap="onChangeLocation">
      <t-icon name="location" size="28rpx" />
      <text>æ¢åœ°æ–¹</text>
    </view>
    <view class="quick-action-btn btn-pressable" bindtap="onChangeTime">
      <t-icon name="time" size="28rpx" />
      <text>æ¢æ—¶é—´</text>
    </view>
    <view class="quick-action-btn btn-pressable" bindtap="onChangeParticipants">
      <t-icon name="user-add" size="28rpx" />
      <text>åŠ äºº</text>
    </view>
  </view>
  
  <!-- æ“ä½œæŒ‰é’® -->
  <view class="draft-actions">
    <!-- è°ƒæ•´ä½ç½®æŒ‰é’® -->
    <view class="action-btn action-btn--secondary btn-pressable" bindtap="onAdjustLocation">
      <t-icon name="location" size="32rpx" />
      <text>è°ƒæ•´ä½ç½®</text>
    </view>
    
    <!-- ç¡®è®¤å‘å¸ƒæŒ‰é’® -->
    <view 
      class="action-btn action-btn--primary btn-pressable {{isExpired ? 'disabled' : ''}}" 
      bindtap="onConfirm"
    >
      <t-icon name="check" size="32rpx" />
      <text>ç¡®è®¤å‘å¸ƒ</text>
    </view>
  </view>
</view>
