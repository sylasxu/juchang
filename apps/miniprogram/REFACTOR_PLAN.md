# 聚场小程序改造计划

## 🎯 改造目标
将现有的社交动态小程序改造为 LBS 找搭子平台

## 📱 页面改造方案

### 主要页面（TabBar）

#### 1. 首页 → 活动广场 (`pages/home`)
**现状：** 推荐流 + 关注流的动态展示
**改造为：** 
- **附近活动** Tab - 基于 LBS 显示附近活动
- **推荐活动** Tab - 算法推荐的活动
- **我的关注** Tab - 关注用户发布的活动
- 增加筛选功能（活动类型、距离、时间）
- 增加地图视图切换

#### 2. 消息页 (`pages/message`) ✅ 保持
**现状：** 聊天消息列表
**微调：**
- 增加活动群聊类型标识
- 增加系统通知（活动提醒、参与通知等）

#### 3. 我的页面 (`pages/my`) 🔄 改造
**现状：** 个人信息 + 服务入口
**改造为：**
- 个人信息（头像、昵称、信用分、会员等级）
- **我发布的活动**
- **我参与的活动** 
- **我的收藏**
- 设置入口

### 子包页面改造

#### 4. 发布页 → 发布活动 (`pages/publish/activity`)
**现状：** 发布动态（图片 + 文字 + 标签 + 位置）
**改造为：**
- 活动封面图片
- 活动标题 + 详细描述
- **活动时间选择** ⭐
- **活动地点选择** ⭐ (LBS 核心)
- **参与人数限制** ⭐
- **活动类型标签** ⭐
- **费用设置** ⭐
- 发布设置（是否需要审核、自动通过等）

#### 5. 搜索页 (`pages/search`) 🔄 增强
**现状：** 基础搜索
**增强为：**
- 搜索活动（按标题、标签、地点）
- 搜索用户
- 历史搜索记录
- 热门搜索推荐

#### 6. 聊天页 (`pages/chat`) ✅ 保持 + 增强
**现状：** 单聊
**增强：**
- 保持单聊功能
- 增加活动群聊 (`pages/chat/group`)
- 增加活动相关的快捷消息

### 新增核心页面

#### 7. 活动详情页 (`pages/activity/detail`) ⭐ 新增
- 活动基本信息（时间、地点、人数、费用）
- 活动描述
- 发起人信息
- 参与者列表预览
- 报名/取消报名按钮
- 分享功能
- 地图位置显示

#### 8. 活动参与者页 (`pages/activity/participants`) ⭐ 新增
- 参与者列表
- 参与者信息（头像、昵称、信用分）
- 私聊入口
- 踢出功能（发起人）

#### 9. 地图相关页面 ⭐ 核心功能
- **地点选择页** (`pages/map/select`) - 发布活动时选择地点
- **地图查看页** (`pages/map/view`) - 查看活动位置

#### 10. 用户相关页面
- **用户资料页** (`pages/user/profile`) - 查看他人资料
- **个人信息编辑** (`pages/user/edit`) - 编辑个人信息  
- **用户活动页** (`pages/user/activities`) - 查看用户发布/参与的活动

#### 11. 活动管理页 (`pages/activity/manage`) ⭐ 新增
- 管理自己发布的活动
- 参与者管理
- 活动状态控制（开始、结束、取消）

### 认证页面重构 (`pages/auth`)
- **登录页** (`pages/auth/login`)
- **注册页** (`pages/auth/register`) 
- **验证码页** (`pages/auth/verify`)

## 🎨 UI/UX 改造重点

### 1. 配色方案
- 使用与 Admin 端一致的 shadcn 配色
- 主色：`#1a1b3a` (深蓝)
- 辅助色：`#f8f9fa` (浅灰)

### 2. 组件定制
- 基于 TDesign 组件库
- 自定义主题变量
- 保持与 Web 端一致的视觉风格

### 3. 核心交互
- **地图交互** - 选择位置、查看附近活动
- **筛选交互** - 活动类型、距离、时间筛选
- **社交交互** - 关注、私聊、群聊

## 🔧 技术改造

### 1. TypeScript 升级
- 将所有 `.js` 文件改为 `.ts`
- 添加类型定义
- 配置 tsconfig.json

### 2. API 集成
- 使用 Orval 生成 API SDK
- 集成聚场后端 API
- 实现数据层

### 3. 状态管理
- 用户状态管理
- 活动数据缓存
- 位置信息管理

## 📋 改造优先级

### Phase 1: 核心功能 (Week 1-2)
1. ✅ 配置 TypeScript 环境
2. 🔄 改造首页为活动广场
3. ⭐ 实现发布活动功能
4. ⭐ 实现活动详情页
5. ⭐ 集成地图选择功能

### Phase 2: 社交功能 (Week 3)
1. 🔄 完善用户系统
2. 🔄 实现聊天功能增强
3. ⭐ 实现活动参与管理

### Phase 3: 优化完善 (Week 4)
1. 🎨 UI/UX 优化
2. 🔧 性能优化
3. 🧪 测试完善

## 🎯 成功指标
- [ ] 用户可以发布活动
- [ ] 用户可以搜索并参与附近活动
- [ ] 用户可以与活动参与者聊天
- [ ] 地图功能正常工作
- [ ] UI 风格与 Admin 端保持一致