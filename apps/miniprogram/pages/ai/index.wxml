<nav title-text="AI 助手" />
<view class="ai-container">
  <view class="ai-quota">
    <view class="quota-item">
      <text class="quota-label">今日剩余</text>
      <text class="quota-value">建局 {{aiQuota.create}}/3 | 对话 {{aiQuota.chat}}/5</text>
    </view>
  </view>
  
  <view class="ai-shortcuts">
    <t-button class="shortcut-btn" theme="light" size="medium" bindtap="onQuickAction" data-action="find">
      帮我找周末的局
    </t-button>
    <t-button class="shortcut-btn" theme="light" size="medium" bindtap="onQuickAction" data-action="write">
      帮我写个招募文案
    </t-button>
    <t-button class="shortcut-btn" theme="light" size="medium" bindtap="onQuickAction" data-action="analyze">
      分析这个申请者
    </t-button>
  </view>

  <view class="ai-chat">
    <scroll-view class="chat-messages" scroll-y scroll-top="{{scrollTop}}">
      <view wx:for="{{messages}}" wx:key="index" class="message {{item.role}}">
        <view class="message-content">{{item.content}}</view>
      </view>
    </scroll-view>
    
    <view class="chat-input">
      <t-input 
        placeholder="输入你的问题..." 
        value="{{inputText}}" 
        bindchange="onInputChange"
        confirm-type="send"
        bindconfirm="onSendMessage"
      />
      <t-button theme="primary" size="small" bindtap="onSendMessage">发送</t-button>
    </view>
  </view>
</view>

<!-- 额度不足弹窗 -->
<t-dialog
  visible="{{showQuotaDialog}}"
  title="AI额度已用完"
  content="选择以下方式继续使用AI功能"
  confirm-btn="购买额度包 ¥5"
  cancel-btn="明天再来"
  bindconfirm="onBuyQuota"
  bindcancel="onCloseQuotaDialog"
/>

<t-toast id="t-toast" />