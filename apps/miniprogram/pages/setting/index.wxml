<!--
  设置页面
  TDesign + Atomic Less 重构
-->
<view class="min-h-screen bg-gray-50 pb-12">
  <!-- 设置分组 -->
  <view wx:for="{{menuData}}" wx:key="title" class="mb-3">
    <view class="px-4 pt-3 pb-2 text-sm text-gray-400">{{item.title}}</view>
    <t-cell-group theme="card">
      <block wx:for="{{item.items}}" wx:for-item="subItem" wx:for-index="subIndex" wx:key="key">
        <!-- 开关类型 -->
        <t-cell 
          wx:if="{{subItem.type === 'switch'}}"
          title="{{subItem.title}}"
          bordered="{{subIndex < item.items.length - 1}}"
        >
          <t-switch 
            slot="note"
            value="{{subItem.value}}"
            data-group-index="{{index}}"
            data-item-index="{{subIndex}}"
            bind:change="handleSwitchChange"
          />
        </t-cell>
        
        <!-- 操作/链接类型 -->
        <t-cell 
          wx:else
          title="{{subItem.title}}"
          arrow
          hover
          bordered="{{subIndex < item.items.length - 1}}"
          data-key="{{subItem.key}}"
          data-type="{{subItem.type}}"
          bind:tap="handleItemTap"
        />
      </block>
    </t-cell-group>
  </view>

  <!-- 退出登录按钮 -->
  <view wx:if="{{isLoggedIn}}" class="px-4 py-5">
    <t-button 
      theme="danger" 
      variant="outline" 
      block
      bind:tap="handleLogout"
    >
      退出登录
    </t-button>
  </view>

  <!-- 版本信息 -->
  <view class="text-center py-5 text-xs text-gray-400">
    <text>聚场 v1.0.0</text>
  </view>
</view>
