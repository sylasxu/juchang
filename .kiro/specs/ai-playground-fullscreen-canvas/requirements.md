# Requirements: AI Playground 全屏画布改造

## 1. 概述

将 AI Playground 从当前的分栏布局改造为全屏画布模式，最大化流程图展示空间，提升调试体验。

## 2. 当前问题

1. **空间利用率低**: 页面被 Header、顶部设置区、左侧聊天面板占据大量空间
2. **流程图受限**: 流程图展示区域受限，无法充分利用屏幕空间
3. **控制项分散**: 控制项分散在多个区域（顶部、左侧、右侧），不够集中

## 3. 用户故事

### US-1: 全屏画布
**作为** 开发者  
**我想要** 整个页面只显示流程图  
**以便** 更清晰地查看 AI 执行链路

**验收标准**:
- 移除 Header 导航栏
- 移除顶部设置区
- 移除左侧聊天面板
- 流程图占据整个屏幕

### US-2: 浮动控制按钮
**作为** 开发者  
**我想要** 在画布上有浮动的控制按钮  
**以便** 快速访问常用功能

**验收标准**:
- 右上角显示浮动按钮组
- 包含按钮：设置 (⚙️)、发送消息 (💬)、清空 (🗑️)
- 按钮有 Tooltip 提示
- 按钮半透明背景，hover 时高亮

### US-3: 侧边控制 Drawer
**作为** 开发者  
**我想要** 点击按钮打开侧边抽屉  
**以便** 发送消息和调整设置

**验收标准**:
- 点击 [💬] 按钮打开侧边 Drawer
- Drawer 从右侧滑入，宽度 400px
- 包含内容：
  - 消息发送区（输入框 + 发送按钮）
  - 模拟设置（用户类型、位置）
  - 统计信息
  - Trace 开关
- 点击遮罩或 ESC 关闭 Drawer

### US-4: 统一的右侧 Drawer
**作为** 开发者  
**我想要** 使用统一的右侧 Drawer 显示控制项和节点详情  
**以便** 保持界面简洁统一

**验收标准**:
- 只有一个右侧 Drawer
- 点击浮动按钮打开 Drawer 显示控制面板
- 点击流程图节点打开 Drawer 显示节点详情
- Drawer 内容根据触发源动态切换
- 有返回按钮可以从节点详情返回控制面板

### US-5: 增强的节点详情展示
**作为** 开发者  
**我想要** 节点详情有清晰的信息层级  
**以便** 快速理解节点的执行情况

**验收标准**:
- Header 显示节点类型图标 + 名称 + 类型标签 + 状态 Badge
- 输入/输出参数分组展示，使用卡片样式
- 显示执行详情（耗时、Token 消耗等）
- 显示关联的下游节点，可点击跳转
- 参考 Dify 的节点详情信息层级设计

## 4. 非功能需求

- **性能**: 全屏模式下流程图渲染性能不降低
- **响应式**: 小屏幕下 Drawer 宽度自适应
- **可访问性**: 所有按钮支持键盘导航
- **动画**: Drawer 滑入滑出有平滑动画

## 5. 技术约束

- 使用 shadcn/ui Sheet 组件
- 保持现有 trace 数据流
- 不修改后端 API
- 纯前端重构
