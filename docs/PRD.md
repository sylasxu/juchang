# 聚场 (JuChang) 产品需求文档

> **版本**：v3.4 (Final)
> **更新日期**：2025-01
> **App 名称**：聚场 (JuChang)
> **功能定位**：你的 AI 活动助理 (Your AI Activity Assistant)
> **核心 Slogan**：想怎么玩？跟小聚说说。
> **AI 角色名**：小聚 (XiaoJu)

---

## 0. 我们在解决什么？(The Problem We Solve)

### 0.1 旧世界的痛点 🔴

**场景**：用户在 500 人的"重庆剧本杀组局群"或者抖音热门视频下评论。

| 痛点 | 描述 | 用户心理 |
|------|------|----------|
| **信息流失** | 喊一句"今晚打本，差1人"，5分钟后被表情包淹没 | "是不是没人理我？" |
| **信任缺失** | 抖音评论区喊人，全是陌生人，谁知道你是不是骗子？去哪？几点？ | "这人靠谱吗？" |
| **沟通成本** | 有人问"在哪？"，有人问"几点？"，有人问"还有位吗？"，发起人要回 10 遍 | "我是复读机吗？" |
| **毫无尊严** | 为了凑人，发起人像复读机一样到处粘贴，显得很卑微 | "我好像在求人..." |

### 0.2 聚场的解法 🟢

**场景**：用户复制那句"今晚打本..."，丢给聚场 AI。

| 解法 | 描述 | 用户感受 |
|------|------|----------|
| **变"流"为"桩"** | AI 生成一张 Halo Card，丢回群里占屏幕面积大，信息结构化（时间/地点/人数），视觉权重碾压纯文字 | "我的消息终于不会被淹没了" |
| **建立信任** | 卡片上精美的静态地图、倒计时、已报名头像，给人"这是一个正经局"的心理暗示。**精致感本身就是信任背书** | "看起来很专业，应该靠谱" |
| **自动化管理** | 别人点卡片进来，看到"已满"就不问了；点"报名"，系统自动统计。发起人不用再做复读机 | "终于不用一个个回复了" |
| **有尊严地组局** | 一张专业的卡片，让发起人从"求人"变成"邀请" | "我是在发邀请，不是在求人" |

### 0.3 核心洞察

> **我们不试图把用户从微信拉走，而是做一个"外挂"**
> - **输入端**：接住微信群里乱七八糟的文本，用 AI 整理成结构化信息
> - **输出端**：生成微信原生卡片，利用视觉优势在群消息流中"抢占地盘"

### 0.4 降维打击场景

**抖音评论区**：
```
路人甲："有人一起去吃这家火锅吗？"
路人乙（你的用户）："我也想去！我建了个局，点进来的占座 👇 [小程序链接]"
```

点进去直接是沉浸式详情页：
- **视觉冲击**：上面是诱人的火锅店地图
- **紧迫感**：倒计时显示"距离开吃还有 3 小时"
- **行动点**：大大的 [🙋‍♂️ 加入] 按钮

这种"专业感"，能极大地提高陌生人的成局率。

---

## 0.5 全链路体验地图 (Full Journey Map)

> **只做 80% 的高频场景，但把这 80% 的体验做到 100% 的丝滑。**

聚场的核心用户只有两种角色：**发起者 (Creator)** 和 **参与者 (Joiner)**。以下是他们的完整体验链路，包含所有"中间态"和"情绪缝隙"。

### 🟢 场景一：发起者链路 (The Creator Flow)

**核心痛点**：在群里喊话太累，信息容易丢。
**目标体验**：像呼吸一样自然地把"废话"变成"精美卡片"。

| 步骤 | 用户行为 | 系统/界面响应 | ⚠️ 中间态设计 |
|------|----------|---------------|---------------|
| 1. 触发 | 打开小程序 | 显示首页 Chat 流 + 欢迎卡片 | **Loading 骨架屏** (防止冷启动白屏) |
| 2. 输入 | 粘贴一段乱七八糟的群接龙 | 底部 AI Dock 弹起，输入框聚焦 | **键盘避让动画** (确保输入框不被遮挡) |
| 3. 等待 | 点击发送 | Chat 流底部出现"呼吸气泡" | **AI 思考动效** (让用户知道 AI 没死机) |
| 4. 确认 | AI 返回 Widget_Draft | 显示地图预览 + 关键信息 | **地图选点页** (如果 AI 定的位置不对，用户必须能改) |
| 5. 发布 | 点击 [确认发布] | 检查手机号绑定状态 | **半屏授权弹窗** (不要跳转新页面，打断感太强) |
| 6. 引导 | 发布成功 | Chat 流出现 Widget_Share | **全屏分享引导** (用户不知道下一步该干嘛，需箭头指引) |
| 7. 闭环 | 转发到群 | 微信原生分享卡片 | **卡片文案优化** (确保标题够骚，图片不裂) |

```
┌─────────────────────────────────────────────────────────────────────────┐
│                                                                         │
│   打开小程序 ──→ 粘贴文字 ──→ AI 思考 ──→ Widget_Draft ──→ 确认发布      │
│       │            │           │            │              │            │
│       ▼            ▼           ▼            ▼              ▼            │
│   骨架屏       键盘避让    呼吸气泡    地图选点页     半屏授权弹窗      │
│                                                            │            │
│                                                            ▼            │
│                                          Widget_Share ──→ 分享引导蒙层  │
│                                               │                         │
│                                               ▼                         │
│                                          转发到群 ✅                    │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

### 🔵 场景二：参与者链路 (The Joiner Flow)

**核心痛点**：不知道去哪，不知道找谁，怕被鸽。
**目标体验**：所见即所得，一键上车。

| 步骤 | 用户行为 | 系统/界面响应 | ⚠️ 中间态设计 |
|------|----------|---------------|---------------|
| 1. 触达 | 在群里点击卡片 | 单页模式启动小程序 | **全局 Loading 状态** (数据加载时的反馈) |
| 2. 决策 | 查看活动详情 | 显示 Halo Card 详情页 | **法务条款入口** (点击报名时需同意隐私协议) |
| 3. 行动 | 点击 [🙋‍♂️ 报名] | 检查手机号 → 成功报名 | **报名成功反馈动画** (撒花/震动，给情绪价值) |
| 4. 连接 | 报名后去哪？ | 自动跳转到活动群聊 | **群聊空状态引导** (群里没人说话时，提示"打个招呼吧") |
| 5. 留存 | 想看看别的 | 点击左上角 [返回] | **首页回流兜底** (单页模式下，返回键要重定向到首页) |

```
┌─────────────────────────────────────────────────────────────────────────┐
│                                                                         │
│   点击卡片 ──→ 活动详情 ──→ 点击报名 ──→ 报名成功 ──→ 活动群聊         │
│       │            │           │            │            │              │
│       ▼            ▼           ▼            ▼            ▼              │
│   Loading      法务入口    半屏授权    成功动画    空状态引导           │
│                                                          │              │
│                                                          ▼              │
│                                                    点击返回 ──→ 首页    │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

### 🛠️ 中间态组件清单

基于以上全链路梳理，以下是必须实现的"体验补丁"：

#### 1. 物理页面补充

| 页面 | 路径 | 关键交互 |
|------|------|----------|
| **地图选点页** | `subpackages/activity/map-picker/index` | 中心固定大头针，拖动地图即时反查地址 |
| **法务页** | `subpackages/legal/index` | 《用户协议》和《隐私政策》，微信审核必查 |

#### 2. 半屏交互组件 (替代生硬的页面跳转)

| 组件 | 场景 | 体验优势 |
|------|------|----------|
| **auth-sheet** | 需要手机号时弹出 | Halo Card 风格半屏，比原生弹窗温柔 |
| **share-guide** | 发布成功后自动弹出 | 箭头指引用户分享，消除"然后呢？"的困惑 |
| **activity-preview-sheet** | 地图页点击 Pin | 轻量预览，不跳转页面，保持地图上下文 |

#### 3. 状态反馈组件 (填补等待缝隙)

| 组件 | 场景 | 视觉效果 |
|------|------|----------|
| **loading-skeleton** | 首页加载、AI 生成卡片 | 灰色占位块 + 流光扫过动画 |
| **thinking-bubble** | AI 思考中 | 三个跳动的小圆点，淡蓝呼吸灯 |

### 📐 设计原则

> **好的体验都在缝隙里** —— Chat-First 应用的核心是"丝滑的流动"，任何生硬的跳转都会打断对话的幻觉。

| 原则 | 说明 |
|------|------|
| **页面 (Page) 越少越好** | 保持沉浸，减少跳转 |
| **模态 (Modal/Sheet) 适度使用** | 解决中断，不打断主流程 |
| **流 (Stream) 是核心** | 对话不能断，状态要连贯 |

---

## 1. 产品定位与核心价值

### 1.1 三大核心优势

#### 🎯 响应感 —— 治愈"无人回应的焦虑"

| 旧世界（微信群） | 新世界（聚场） |
|-----------------|---------------|
| 发消息后死一般的寂静 | AI 秒回，0.5s 内开始响应 |
| 运气好有人回表情包 | 流式反馈：文字逐字显示，Widget 卡片逐步展开 |

#### 📍 秩序感 —— 把"混乱的流"变成"确定的卡片"

| 旧世界（微信群） | 新世界（聚场） |
|-----------------|---------------|
| 信息是流（Flow），瞬间被冲走 | 信息是卡片（Widget），24小时内雷打不动 |
| 想找刚才那个人？翻聊天记录 | 对话历史持久化，下次打开还在 |

#### ⚡ 零门槛 —— 不改变习惯，只提升效率

| 旧世界（填表单） | 新世界（AI 输入坞） |
|-----------------|-------------------|
| 选时间、选地点、填标题 | 在群里怎么说话，在这里就怎么说话 |
| 需要学习新操作 | 直接把群里的乱七八糟复制过来，自动变整齐 |

### 1.2 v3.4 架构：Chat-First + Generative UI + 小聚人格

| 版本 | 架构 | 问题 |
|------|------|------|
| v1.0 | 地图 + 表单 | 门槛高，用户要填表单，冷启动地图空白 |
| v2.0 | Card Feed | 信息密度低，不够直接 |
| v3.2 | Chat-First + Generative UI | 零门槛，像聊天一样组局 |
| v3.3 | + 小聚人格 + 竞品差异化 | 有灵魂，不是冷冰冰的系统 |
| **v3.4** | **+ 文案体系精修** | ✅ 统一品牌调性，强调 AI 执行力 |

**核心交互哲学**：
1. **首页即对话**：小程序打开不再是地图，而是一个无限滚动的 Chat View
2. **功能即气泡**：所有功能都封装在对话流的 Widgets 中
3. **去 Tabbar 化**：底部取消导航栏，改为悬浮的 AI Dock
4. **Generative UI**：AI 根据意图动态生成最合适的 Widget 类型

---

### 1.3 竞品分析与差异化定位

> **这不是竞争，这是错位打击。**

#### 1.3.1 市场格局：粗门 vs 聚场

粗门（CuMen）是这个赛道里的"重装坦克"，走的是典型的 **"公域流量 + 商业化俱乐部 + 强运营"** 的 B2C/B2B2C 路线。他们的界面像是一个热闹的活动电商平台（像美团/大众点评的活动版）。

**如果我们跟他们硬碰硬（去抢俱乐部、搞大活动、拼流量分发），我们必死无疑。**

但好消息是：我们的 **Chat-First + Gen UI 架构**，刚好站在了他们的反面。

#### 1.3.2 本质模型的差异：商城 vs. 秘书

| 维度 | 粗门 (The Mall) | 聚场 (The Agent) |
|------|-----------------|------------------|
| **核心定义** | 活动电商平台 (Marketplace) | AI 组局效能工具 (Utility) |
| **发起人是谁** | B端 / Big C (俱乐部主理人、商家、职业领队) | Small C (普通群主、你、你的朋友、热心群友) |
| **为了什么** | 赚钱 / 搞流量 / 卖票 | 省事 / 怕冷场 / 攒个局 |
| **流量逻辑** | 公域分发 (算法推荐热门活动，像刷抖音) | 私域流转 (在微信群里点对点传播，像发红包) |
| **操作成本** | 极高 (填表、传海报、写文案、设置票种) | 极低 (给 AI 发一句话) |

**结论**：
- **粗门是给卖铲子的人用的**
- **聚场是给想挖坑种树的普通人用的**

#### 1.3.3 用户痛点 = 我们的机会点

很多用户不喜欢粗门，痛点通常集中在以下几点：

#### 痛点 A：商业味太浓，缺乏人情味

| 粗门现状 | 聚场解法 |
|----------|----------|
| 进去全是卖票的（9.9元/99元），全是专业的宣传海报 | **Soft Tech**：界面干净、没有广告、没有推销 |
| 用户感觉自己是"韭菜"，而不是"朋友" | 用户感觉这是"我和朋友的局"，是 AA 制的、平等的 |

#### 痛点 B：圈子固化，新人门槛高

| 粗门现状 | 聚场解法 |
|----------|----------|
| 需要加入某个 Club，里面有等级、有熟人圈子 | **一次性成局**：不强制加圈子 |
| 社恐进去很尴尬 | 基于当下的活动群（Lite Chat），活动结束就解散（或归档），没有社交压力 |

#### 痛点 C：组个小局太重了

| 粗门现状 | 聚场解法 |
|----------|----------|
| 我就想约 3 个朋友吃个火锅，还要去粗门建个活动、审核、发布？疯了吗？ | **一句话成局**：这就是 Chat-First 的绝对统治区 |
| 对于"高频、低客单价、熟人/半熟人"的局，粗门是大炮打蚊子 | 聚场是精准手术刀 |

#### 1.3.4 场景的绝对隔离 (Scenario Split)

这是我们和粗门的楚河汉界：

| 场景 | 谁占优势 | 为什么？ |
|------|----------|----------|
| 商业活动 (百人徒步、飞盘局、收费教学) | 🔴 **粗门 胜** | 需要票务系统、核销、公域流量招募陌生人 |
| 兴趣社群 (每周固定的羽毛球俱乐部) | 🔴 **粗门 胜** | 需要会员管理、积分体系、排行榜 |
| 朋友聚餐 (火锅、烧烤、家宴) | 🟢 **聚场 胜** | 粗门做不了。太重了，用户不会为了吃饭去发个商业活动 |
| 临时起意 (今晚去哪喝一杯？谁有空？) | 🟢 **聚场 胜** | 唯快不破。Chat-First 3秒生成，直接甩群里摇人 |
| 半熟人拼车/拼单 (剧本杀缺1、拼车去机场) | 🟢 **聚场 胜** | 信任感。基于群聊的信任背书，加上 Widget 的清晰展示 |
| 不知道去哪 (探索周边) | 🟢 **聚场 胜** | AI 意图识别。粗门要你自己在列表里搜，聚场是直接告诉你"附近有啥" |

**差异化总结**：
- **粗门垄断了头部 20% 的"严肃/商业活动"**
- **聚场要吃掉长尾 80% 的"生活/社交活动"**

#### 1.3.5 杀手锏：Gen UI vs. Static UI

**粗门的 UI** 是典型的 Web 2.0 货架式 UI：
- 复杂的 Tabbar（首页、圈子、发布、消息、我的）
- 密密麻麻的 Banner 和瀑布流
- 如果你想发布活动，你需要适应它的表单

**聚场的 UI** 是 Web 3.0 / Agent UI：
- **Chat-First**：只有一个对话框
- **Generative**：如果你想发布活动，系统适应你的语言
- **Halo Card**：生成的不是一个"商品详情页"，而是一张"社交邀请函"

> 这种体验上的降维打击，会让用惯了粗门的用户感到震惊：**"原来组个局可以这么简单？"**

#### 1.3.6 战略定位：不做平台，做工具

**不要试图模仿粗门去做**：
- ❌ 俱乐部入驻机制
- ❌ 主理人激励计划（那个复杂的贡献值/奖金池）
- ❌ 年度盛典/排行榜

**我们要极致地做**：
- ✅ **微信群的外挂**：我们是寄生在微信群里的 AI，而不是想把人拉到 App 里的平台
- ✅ **发起人的面子**：让那个只会说"来吃饭"的群主，变成能发出精美邀请函的"主理人"
- ✅ **AI 的智能**：粗门没有 AI，他们靠运营堆砌内容。我们靠 AI 整理内容

#### 1.3.7 一句话差异化

如果投资人或用户问你："你们和粗门有什么区别？"

你的回答：

> **"粗门是给俱乐部卖票的电商平台；聚场是你的 AI 活动助理。"**
>
> **"你想去参加百人徒步，去粗门。你想约几个朋友吃火锅、打麻将、拼个车，用聚场。"**

#### 1.3.8 名字的意义

现在回看"聚场"这个名字：

> **我们守住的是生活里最真实的那些"小聚"，而那里才是 99% 的流量所在。**

---

## 2. 商业模式 (MVP)

### 2.1 核心策略：全免费

**MVP 阶段目标**：验证产品价值，积累用户数据

| 功能 | 额度 | 说明 |
|------|------|------|
| AI 创建活动 | 3次/天 | 防止滥用，满足正常需求 |
| AI 探索附近 | 5次/天 | 探索场景额度 |
| 报名参与 | ✅ 无限 | 核心功能 |
| 群聊沟通 | ✅ 无限 | 核心功能 |
| 分享活动 | ✅ 无限 | 增长引擎 |

### 2.2 MVP 砍掉的功能

| 功能 | 砍掉原因 |
|------|----------|
| 付费推广 | MVP 阶段验证核心价值 |
| 会员订阅 | 用户量不足 |
| 幽灵锚点 | 运营成本高 |
| 靠谱度系统 | 复杂度高 |
| 图片上传 | 开发成本高 |
| 俱乐部入驻 | 不做平台，做工具（见 1.3.6 战略定位） |
| 主理人激励计划 | 不做平台，做工具（见 1.3.6 战略定位） |

---

## 3. 核心功能：Chat-First 首页

### 3.1 首页三层结构

```
┌─────────────────────────────────────────────────────────┐
│  [≡]              聚场              [⋮]                │  ← Custom Navbar
├─────────────────────────────────────────────────────────┤
│                                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │ 🤖 晚上好，渣渣辉                               │   │  ← Widget Dashboard
│  │                                                 │   │
│  │ 📅 今日待参加                                   │   │
│  │ ┌─────────────────────────────────────────┐    │   │
│  │ │ 🍲 观音桥火锅局 · 今晚 19:00            │    │   │
│  │ └─────────────────────────────────────────┘    │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
│                    Chat Stream                          │  ← 对话流
│                                                         │
├─────────────────────────────────────────────────────────┤
│  ┌─────────────────────────────────────────────────┐   │
│  │ 粘贴群聊天记录，或直接告诉我怎么玩... [📋] [🎤]│   │  ← AI Dock
│  └─────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────┘
```

### 3.2 Custom Navbar

| 位置 | 元素 | 功能 |
|------|------|------|
| 左侧 | Menu 图标 (≡) | 跳转个人中心 |
| 中间 | 品牌词"聚场" | - |
| 右侧 | More 图标 (⋮) | 显示下拉菜单 |

**下拉菜单 (Dropmenu)**：
- [消息中心] → 跳转消息列表
- [新对话] → 清空对话历史

### 3.3 Widget 类型 (Generative UI)

| Widget | 说明 | 触发时机 |
|--------|------|----------|
| Widget_Dashboard | 进场欢迎卡片 | 首次进入/新对话 |
| Widget_Draft | 意图解析卡片 | AI 识别为"创建意图" |
| Widget_Share | 创建成功卡片 | 活动发布成功 |
| **Widget_Explore** | **探索卡片 (Halo Card)** | **AI 识别为"探索意图"** |
| Widget_Error | 错误提示卡片 | AI 解析失败 |

### 3.4 AI 意图分类 (Intent Classification)

| 用户输入 | 意图类型 | 返回 Widget |
|---------|---------|-------------|
| "明晚观音桥打麻将，3缺1" | 明确创建 | Widget_Draft |
| "周六下午踢球，解放碑" | 明确创建 | Widget_Draft |
| "观音桥附近有什么好玩的活动" | 模糊探索 | Widget_Explore |
| "推荐一下附近的局" | 模糊探索 | Widget_Explore |
| "今天天气怎么样" | 无法识别 | 文本消息（引导） |

---

## 4. 创建场景：Widget_Draft

### 4.1 AI Dock 交互

**用户输入**："明晚观音桥打麻将，3缺1"

**对话流响应**：

```
[用户气泡] 明晚观音桥打麻将，3缺1

[AI 气泡] 帮你把局组好了！就在观音桥，离地铁口 200 米

[Widget_Draft]
┌─────────────────────────────────────┐
│ 🀄️ 麻将局·3缺1                     │
│ 📍 观音桥 · 明晚 19:00              │
│ 👥 4人 · 🎲 桌游                    │
│ [地图预览]                          │
│                                     │
│  [📍 调整位置]    [✅ 确认发布]     │
└─────────────────────────────────────┘
```

### 4.2 卡片内容

- AI 预填的标题、时间、地点、类型
- 静态地图预览（以解析坐标为中心）
- [📍 调整位置] 按钮 → 跳转地图选点页
- [✅ 确认发布] 按钮 → 检查手机号 → 跳转确认页

### 4.3 草稿持久化

- AI 解析成功后，草稿存入数据库（draft 状态）
- 用户关闭小程序后再打开，草稿卡片仍在
- 草稿过期（时间已过）时显示"已过期"状态

---

## 5. 探索场景：Widget_Explore (Generative UI)

### 5.1 设计理念

**Static Preview + Immersive Expansion**（静态预览 + 沉浸式展开）

解决小程序 `<map>` 与 `<scroll-view>` 的手势冲突：
- 在 Chat_Stream 中显示静态地图图片（避免手势冲突）
- 点击后展开为全屏可交互地图（沉浸式接管）

### 5.2 交互流程

**用户输入**："观音桥附近有什么好玩的活动"

**对话流响应**：

```
[用户气泡] 观音桥附近有什么好玩的活动

[AI 气泡] 正在搜索观音桥附近的活动...

[AI 气泡] 找到了 5 个热门活动！

[Widget_Explore - Halo Card]
┌─────────────────────────────────────┐
│ 📍 为你找到观音桥附近的 5 个热门活动 │
│                                     │
│ [静态地图预览，带多个 Marker]        │
│                                     │
│ 🍲 观音桥火锅局 · 500m · 今晚 19:00  │
│ 🎴 麻将局·3缺1 · 800m · 明天 14:00   │
│ ⚽ 足球约战 · 1.2km · 周六 15:00     │
│                                     │
│        [🗺️ 展开地图查看更多]         │
└─────────────────────────────────────┘
```

### 5.3 沉浸式地图页 (Explore Map Page)

点击 Widget_Explore 或 [🗺️ 展开地图] 后：

```
┌─────────────────────────────────────────────────────────┐
│  [←]              探索附近              [筛选]          │  ← Custom Navbar
├─────────────────────────────────────────────────────────┤
│  [全部] [美食] [运动] [桌游] [娱乐]                     │  ← 筛选栏
├─────────────────────────────────────────────────────────┤
│                                                         │
│                    Full Screen Map                      │  ← 全屏可交互地图
│                                                         │
│         📍          📍                                  │  ← Activity Pins
│                📍                                       │
│                                                         │
├─────────────────────────────────────────────────────────┤
│  ┌─────────────────────────────────────────────────┐   │
│  │ ═══════════════════════════════════════════════ │   │  ← 拖拽指示条
│  │                                                 │   │
│  │ 🍲 观音桥火锅局 · 500m · 今晚 19:00         [>] │   │  ← 活动列表
│  │ 🎴 麻将局·3缺1 · 800m · 明天 14:00          [>] │   │
│  │ ⚽ 足球约战 · 1.2km · 周六 15:00             [>] │   │
│  │                                                 │   │
│  └─────────────────────────────────────────────────┘   │  ← Bottom Sheet
└─────────────────────────────────────────────────────────┘
```

**交互特性**：
- 地图可拖拽、缩放
- 拖拽到新区域自动加载活动
- 点击 Pin 显示活动简要信息
- 点击活动项跳转详情页
- 收起时使用收缩动画（非标准页面返回）

---

## 6. 创建成功卡片 (Widget_Share)

### 6.1 卡片内容

- 原生分享卡片预览（标题、地图、关键信息）
- [📤 分享到群] 按钮 → 触发微信原生分享
- [👀 查看详情] 按钮 → 跳转活动详情页

### 6.2 分享卡片

- **标题**：AI 生成的骚气标题（如"🔥 观音桥老火锅，3缺1，速来！"）
- **图片**：腾讯地图静态图（Zoom 16，红色 Marker，5:4 比例）
- **路径**：`/subpackages/activity/detail/index?id=xxx`

---

## 7. 进场欢迎卡片 (Widget_Dashboard)

### 7.1 动态问候语 (v3.4 优化)

> **原则**：根据时间动态变化，且必须包含"引导输入"的暗示，强调 AI 的执行力。

| 时间 | 问候语 |
|------|--------|
| 周五 18:00 后 | "Hi，我是小聚。周末到了，想怎么玩？跟我说说，我来安排。" |
| 周末 | "周末愉快，[昵称]！想怎么玩？跟小聚说说，我来安排。" |
| 工作日晚 (18:00-24:00) | "晚上好[昵称]。今晚有什么安排？直接告诉我，我帮你发群里。" |
| 深夜 (0:00-6:00) | "这么晚还没睡？想约宵夜还是想找人聊天？跟小聚说说。" |
| 6:00-12:00 | "早上好，[昵称]！新的一天，有什么计划？跟小聚说说。" |
| 12:00-18:00 | "下午好，[昵称]！下午茶时间，想约个局？跟我说说。" |

### 7.2 待参加活动

- 显示最多 3 个待参加活动
- 点击跳转活动详情页
- 无活动时显示引导文案和热门 Prompt

---

## 8. 个人中心 (Profile Page)

### 8.1 页面风格

**Inset Grouped List**：浅灰背景 + 白色圆角卡片组

### 8.2 页面结构

```
┌─────────────────────────────────────────────────────────┐
│  [←]              个人中心                              │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │  [头像]  渣渣辉                                  │   │  ← Header
│  │          一起来组局吧                            │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │  [📝] 我发布的                              [>] │   │  ← Group 1
│  │  [🎯] 我参与的                              [>] │   │
│  │  [📦] 历史归档                              [>] │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │  [📱] 手机绑定                        已认证    │   │  ← Group 2
│  │  [🔒] 隐私设置                              [>] │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │  [ℹ️] 关于聚场                              [>] │   │  ← Group 3
│  │  [💬] 意见反馈                              [>] │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

---

## 9. 消息中心 (Message Center)

### 9.1 功能

- 显示所有参与的活动群聊列表
- 显示活动标题、最后一条消息、未读数量
- 点击跳转到活动群聊页面

### 9.2 群聊状态

| 状态 | 显示 |
|------|------|
| 活跃 | 正常显示 |
| 已归档 | 显示"已归档"标识 |

---

## 10. 活动群聊 (Lite Chat)

### 10.1 基本规则

- 活动创建后立即开启群聊
- 仅支持文字消息
- 活动开始后 24 小时自动归档（只读）

### 10.2 轮询机制

- 前台：每 5-10 秒轮询新消息
- 后台：停止轮询
- 回到前台：立即请求一次 + 恢复轮询

---

## 11. 延迟验证

### 11.1 游客权限

| 操作 | 是否需要登录 |
|------|-------------|
| 浏览对话 | ❌ |
| 查看活动详情 | ❌ |
| 尝试 AI 解析 | ❌ |
| 探索附近活动 | ❌ |
| 发布活动 | ✅ 需绑定手机号 |
| 报名活动 | ✅ 需绑定手机号 |

### 11.2 手机号绑定

使用微信原生能力：
```html
<button open-type="getPhoneNumber" bindgetphonenumber="onGetPhoneNumber">
  绑定手机号
</button>
```

---

## 12. 活动管理

### 12.1 发起人操作

| 时机 | 可用操作 |
|------|----------|
| 活动未开始 | 删除活动 |
| 活动开始后 | 确认成局 / 取消活动 |

### 12.2 状态流转

```
draft → active → completed
              → cancelled
```

---

## 13. 视觉设计：Soft Tech (柔和科技)

### 13.1 设计灵感

**蚂蚁阿福 (Ant Ah Fu)** 的疗愈科技风格：清爽、柔和、高信任感

### 13.2 配色方案

| 用途 | 浅色模式 | 深色模式 |
|------|----------|----------|
| 页面背景 | #F5F7FA | #0F172A |
| 卡片背景 | #FFFFFF | #1E293B |
| 主文字 | #1F2937 | #F1F5F9 |
| 次文字 | #6B7280 | #94A3B8 |
| 主色 (矢车菊蓝) | #5B75FB | #6380FF |
| 背景渐变顶部 | #E6EFFF | #1E1B4B |
| 辅助色 - 淡蓝 | #93C5FD | - |
| 辅助色 - 淡紫 | #C4B5FD | - |
| 辅助色 - 薄荷青 | #6EE7B7 | - |

### 13.3 卡片风格 (Soft Card)

- 纯白背景（深色模式：深板岩灰）
- 大圆角 32rpx
- 柔和阴影（深色模式：淡边框代替）

### 13.4 深色模式

- 从 Day 1 支持
- 使用语义化 CSS 变量
- 深色背景使用 Slate/Navy 色板，非纯黑

---

## 14. 语气规范 (Tone of Voice) 🗣️

### 14.1 核心原则

> **不要让 UI 的高级感变成"距离感"**
> 虽然我们用了 Halo Card、Generative UI，但文案和交互必须接地气。

#### AI 角色设定

| 属性 | 设定 |
|------|------|
| **名字** | 小聚 (XiaoJu) |
| **定位** | 用户的 AI 活动助理，不是冷冰冰的系统 |
| **称呼用户** | 根据场景灵活使用（如"主理人"、"[昵称]"） |
| **自我介绍** | "Hi，我是小聚。想怎么玩？跟我说说，我来安排。" |
| **语气** | 温暖、接地气、像朋友一样，但强调执行力 |

> **"聚场"是空间，"小聚"是服务者** —— 这解决了"平台感太重"的问题。

### 14.2 小聚回复示例 (v3.4 优化)

| ❌ 反例（太装逼） | ✅ 正例（小聚风格） |
|------------------|------------------|
| "已为您构建全息活动契约，请确认地理围栏坐标。" | "帮你把局组好了！就在观音桥，离地铁口 200 米，把这张卡片发群里吧。" |
| "正在解析您的意图向量..." | "收到，小聚正在整理你的安排..." |
| "活动实体已成功持久化至数据库。" | "卡片做好了！看看这样安排行不行？" |
| "检测到地理位置偏移，建议重新校准。" | "这个地址好像有点远，要不要换一个？" |

### 14.3 按钮文案

| ❌ 反例 | ✅ 正例 |
|--------|--------|
| 确认提交 | 确认发布 |
| 执行分享 | 分享到群 |
| 调整地理坐标 | 调整位置 |
| 查看详细信息 | 查看详情 |
| 展开地图视图 | 展开地图 |

### 14.4 错误提示

| ❌ 反例 | ✅ 正例 |
|--------|--------|
| "解析失败，请检查输入格式。" | "抱歉，我没理解你的意思，试试换个说法？" |
| "网络请求超时，错误码 504。" | "网络有点慢，再试一次？" |
| "今日配额已耗尽。" | "今天的 AI 额度用完了，明天再来吧～" |
| "用户认证失败。" | "需要先绑定手机号才能继续哦" |

### 14.5 空状态文案 (v3.4 优化)

| 场景 | 文案 |
|------|------|
| 无待参加活动 | "最近没局？有些朋友可能在等你开口。" |
| 探索无结果 | "附近暂时没有活动，要不你来发起第一个？" |
| 消息中心为空 | "还没有群聊消息，发布活动后就有了" |
| 输入框占位符 | "粘贴群聊天记录，或直接告诉我怎么玩..." |

### 14.6 AI 思考与反馈文案 (v3.4 新增)

| 场景 | 文案 |
|------|------|
| AI 正在生成 | "收到，小聚正在整理你的安排..." |
| AI 生成完毕 | "卡片做好了！看看这样安排行不行？" |
| 发布成功 | "搞定！活动已发布，快分享给朋友吧。" |
| 额度用完 | "今天的 AI 额度用完了，明天再来吧～" |
| 网络错误 | "网络有点慢，再试一次？" |
| 解析失败 | "抱歉，我没理解你的意思，试试换个说法？" |

### 14.7 分享卡片文案 (v3.4 新增)

| 元素 | 文案 |
|------|------|
| 标题 | (AI 生成的活动标题，如：🔥 观音桥老火锅，3缺1) |
| 副标题 (App 来源) | "聚场AI - 想怎么玩？跟小聚说说" |
| 默认分享标题 | "聚场 - 你的 AI 活动助理" |

---

## 15. 页面结构

### 15.1 完整页面清单 (13 页)

| 页面 | 路径 | 类型 | 说明 |
|-----|------|------|------|
| 首页 | `pages/home/index` | 主包 | Chat-First 对话流 |
| 个人中心 | `pages/profile/index` | 主包 | Inset Grouped List |
| 消息中心 | `pages/message/index` | 主包 | 群聊列表 |
| 活动群聊 | `pages/chat/index` | 主包 | Lite Chat |
| 活动详情 | `subpackages/activity/detail/index` | 分包 | Halo Card 详情 |
| 活动确认 | `subpackages/activity/confirm/index` | 分包 | 发布前确认 |
| 活动列表 | `subpackages/activity/list/index` | 分包 | 我发布的/我参与的/历史归档 |
| **地图选点** | `subpackages/activity/map-picker/index` | 分包 | 中心固定 Pin + 逆地址解析 |
| **沉浸式地图** | `subpackages/activity/explore/index` | 分包 | Generative UI 展开 |
| **法务页** | `subpackages/legal/index` | 分包 | 用户协议 + 隐私政策 (审核必备) |

### 15.2 中间态组件清单 (非页面)

| 组件 | 路径 | 触发场景 |
|------|------|----------|
| **auth-sheet** | `components/auth-sheet/` | 需要手机号绑定时 |
| **share-guide** | `components/share-guide/` | 活动发布成功后 |
| **activity-preview-sheet** | `components/activity-preview-sheet/` | 地图页点击 Pin |
| **thinking-bubble** | `components/thinking-bubble/` | AI 思考中 |
| **widget-skeleton** | `components/widget-skeleton/` | Widget 加载中 |

### 15.3 典型用户路径

**发起者链路 (Creator Flow)**：
```
首页(1) → [AI 思考] → Widget_Draft → [地图选点(2)] → [确认发布] → Widget_Share → [分享引导] → 转发到群 ✅
```

**参与者链路 (Joiner Flow)**：
```
点击卡片(1) → 活动详情 → [报名] → [auth-sheet] → 报名成功 → 活动群聊(2) ✅
```

**探索场景**：
```
首页(1) → Widget_Explore → 沉浸式地图(2) → [activity-preview-sheet] → 活动详情(3) = 3 层 ✅
```

**个人中心**：
```
首页(1) → 个人中心(2) → 活动列表(3) → 活动详情(4) = 4 层 ✅
```

**分享卡片进入**：
```
分享卡片进入(1) → 返回 → 首页(1) = 1 层 ✅ (首页回流兜底)
```

---

## 16. 产品逻辑闭环

```
┌─────────────────────────────────────────────────────────┐
│                                                         │
│   明确意图                        模糊探索              │
│   "明晚观音桥打麻将"              "观音桥有什么好玩的"   │
│         │                              │                │
│         ▼                              ▼                │
│   Widget_Draft                   Widget_Explore         │
│   (表单模式)                     (地图模式)             │
│         │                              │                │
│         ▼                              ▼                │
│   用户确认发布                   沉浸式地图页           │
│         │                              │                │
│         ▼                              ▼                │
│   Widget_Share                   发现感兴趣的活动       │
│   (卡片模式)                           │                │
│         │                              ▼                │
│         ▼                        活动详情页 → 报名      │
│   分享到微信群                                          │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

**这就是 Generative UI 的核心价值**：根据用户意图，动态生成最合适的界面，而不是简单地返回文本或跳转页面。

---

## 17. 成功指标

### 17.1 业务指标

| 指标 | 目标 |
|------|------|
| 活动成局率 | > 50% |
| 7日留存 | > 20% |
| 分享率 | > 30% |
| 探索转化率 | > 15% |

### 17.2 技术指标

| 指标 | 目标 |
|------|------|
| AI 响应时间 | < 2s |
| 页面加载时间 | < 1s |
| 小程序包体积 | < 2MB |

---

## 18. 技术约束（AI 友好型实现）

- ❌ 不使用 `backdrop-filter: blur()` —— 低端安卓机性能杀手
- ❌ 不使用跨页面 Shared Element Transition —— 小程序难以实现
- ❌ 不自动读取剪贴板 —— 微信会强制弹窗，体验差
- ❌ 不在 scroll-view 中嵌入可交互 map —— 手势冲突
- ✅ 使用高透明度白色背景 + box-shadow 模拟层级感
- ✅ 使用静态 Mesh Gradient 图片做背景（性能最优）
- ✅ 用户主动点击粘贴按钮触发剪贴板读取
- ✅ Widget_Explore 使用静态地图图片，点击后展开全屏地图

---

---

## 19. Future Roadmap (Phase 2)

### 19.1 AI 海报生成 API

> **Phase 2: 视觉增长引擎** - 当需要破圈传播时上线

**问题**：Native Share Card 适合群聊快速分享，但朋友圈需要更有设计感的海报。

**解决方案**：提供 `POST /share/poster` API，供小程序和 Admin 调用，生成 AI 增强的朋友圈海报。

**用户流程**：
```
用户点击"生成海报" 
  → 显示"AI 正在绘制您的专属海报..."
  → 3-5 秒后返回海报图片
  → 用户保存到相册 / 发朋友圈
```

**核心卖点**：
- **每次都不一样**：AI 根据活动内容生成独特背景图
- **设计感拉满**：使用 Halo Card 视觉风格，支持毛玻璃、渐变边框等高级效果
- **一键保存**：直接生成图片，无需截图

**策略**：
- **Phase 1 (MVP)**：Native Share Card 解决"快"和"群聊"
- **Phase 2 (Growth)**：AI 海报 API 解决"美"和"朋友圈"

---

## 附录：术语表

| 术语 | 说明 |
|------|------|
| **Brand_Slogan** | **"想怎么玩？跟小聚说说。" - 核心品牌口号 (v3.4)** |
| **Brand_Subtitle** | **"你的 AI 活动助理" - 功能定位 (v3.4)** |
| Chat_Stream | 对话流，首页核心区域 |
| AI_Dock | 超级输入坞，底部悬浮的 AI 入口 |
| **XiaoJu (小聚)** | **AI 助理人格名，聚场的服务者角色** |
| Widget_Dashboard | 进场欢迎卡片 |
| Widget_Draft | 意图解析卡片（创建场景） |
| Widget_Share | 创建成功卡片 |
| **Widget_Explore** | **探索卡片，Halo Card 样式（探索场景）** |
| **Explore_Map_Page** | **沉浸式地图页，全屏可交互地图** |
| **Generative_UI** | **生成式界面，AI 根据意图动态生成 Widget** |
| **Halo_Card** | **光晕卡片，Widget_Explore 的视觉样式** |
| **Intent_Classification** | **意图分类，区分创建 vs 探索** |
| Custom_Navbar | 自定义导航栏 |
| Profile_Page | 个人中心页 |
| Message_Center | 消息中心 |
| Dropmenu | 下拉菜单 |
| Lite_Chat | 活动临时群聊 |
| Location_Hint | 重庆地形适配的位置备注字段 |
| Share_Card | 微信原生分享卡片 |
| Soft_Tech | 柔和科技视觉风格 |
| Soft_Card | 实心白卡样式 |
| Cornflower_Blue | 矢车菊蓝 #5B75FB，主色调 |
| **Auth_Sheet** | **半屏授权弹窗，替代原生手机号授权弹窗** |
| **Share_Guide** | **分享引导蒙层，发布成功后引导用户分享** |
| **Activity_Preview_Sheet** | **活动预览浮层，地图页点击 Pin 时显示** |
| **Thinking_Bubble** | **AI 思考气泡，三个跳动的小圆点** |
| **Widget_Skeleton** | **卡片骨架屏，Widget 加载时的占位** |
| **Map_Picker** | **地图选点页，中心固定 Pin + 逆地址解析** |
| **Creator_Flow** | **发起者链路，从输入到分享的完整流程** |
| **Joiner_Flow** | **参与者链路，从点击卡片到报名的完整流程** |
| **Scenario_Split** | **场景隔离，聚场与粗门的差异化定位边界** |
| **Small_C** | **普通用户，区别于 Big C（俱乐部主理人、商家）** |
| **Long_Tail** | **长尾场景，80% 的生活/社交活动（聚场主攻）** |
